const cron = require("node-cron");

module.exports.config = {
  name: "jumma",
  version: "1.0.2",
  credits: "Hridoy",
  description: "‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶≤‡ßá Jumma Mubarak ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶™‡¶æ‡¶¨‡ßá ‡¶¨‡¶°‡¶º ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶®‡¶∏‡¶π"
};

// üåô ‡¶¨‡¶°‡¶º Jumma Mubarak ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶∂‡¶®
const messages = [
  `üïåüå∏ ‡¶ú‡ßÅ‡¶Æ‡ßç‡¶Æ‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï üå∏üïå

‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶è‡¶á ‡¶™‡¶¨‡¶ø‡¶§‡ßç‡¶∞ ‡¶¶‡¶ø‡¶®‡ßá ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶§, ‡¶¨‡¶∞‡¶ï‡¶§ ‡¶ì ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶¨‡¶∞‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡ßã‡¶ï‡•§  
‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú ‡¶Ü‡¶¶‡¶æ‡ßü ‡¶ï‡¶∞‡ßã, ‡¶¶‡ßã‡ßü‡¶æ ‡¶ï‡¶∞‡ßã ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ì ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§  
‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶ó‡ßÅ‡¶®‡¶æ‡¶π ‡¶Æ‡¶æ‡¶´ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶π‡ßÉ‡¶¶‡ßü‡ßá ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ú‡ßÄ‡¶¨‡¶®‡¶ï‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶§‡ßÅ‡¶≤‡ßÅ‡¶®‡•§  

üåô ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡¶ø‡¶®‡¶ü‡¶ø ‡¶π‡ßã‡¶ï ‡¶ï‡¶≤‡ßç‡¶Ø‡¶æ‡¶£‡¶Æ‡ßü, ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶™‡ßç‡¶∞‡ßá‡¶∞‡¶£‡¶æ‡ßü ‡¶≠‡¶∞‡¶™‡ßÅ‡¶∞‡•§  
‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡¶ì ‡¶è‡¶á ‡¶Ü‡¶®‡¶®‡ßç‡¶¶, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶ú‡ßÅ‡¶Æ‡ßç‡¶Æ‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®‡ßá ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶§‡¶æ‡ßü‡¶æ‡¶≤‡¶æ ‡¶ñ‡ßÅ‡¶¨‡¶á ‡¶∏‡¶®‡ßç‡¶§‡ßÅ‡¶∑‡ßç‡¶ü ‡¶π‡¶®‡•§  

üíõ Jumma Mubarak! ü§≤ ‡¶∏‡¶¨‡¶æ‡¶á‡¶ï‡ßá ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶ï‡ßÉ‡¶™‡¶æ ‡¶ì ‡¶Ü‡¶∂‡ßÄ‡¶∞‡ßç‡¶¨‡¶æ‡¶¶ ‡¶≤‡¶æ‡¶≠ ‡¶π‡ßã‡¶ï‡•§`
];

module.exports.onLoad = function ({ api }) {
  // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßÆ‡¶ü‡¶æ‡ßü (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶∏‡¶Æ‡ßü) ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá
  cron.schedule("0 8 * * 5", () => {
    const randomMsg = messages[Math.floor(Math.random() * messages.length)];

    // ‡¶∏‡¶ï‡¶≤ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
    if (global.data && global.data.allThreadID) {
      for (const threadID of global.data.allThreadID) {
        api.sendMessage(randomMsg, threadID);
      }
      console.log("‚úÖ Jumma Mubarak message sent to all groups!");
    } else {
      console.log("‚ö†Ô∏è No group data found in global.data.allThreadID");
    }
  }, { timezone: "Asia/Dhaka" });
};